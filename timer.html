<html>
<header>
    <style>
        .actions {
            padding: 10px;
            float: right;
        }
        .button {
            background-color: #0b054c;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 20px;
            margin: 4px 2px;
            cursor: pointer;
        }
        .time {
            color: #0b054c;
            font-size: 500px; 
            vertical-align: center; 
            text-align: center; 
            height: 100%;
            padding: 220px 0px;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.js"></script>
</header>

<body>

<div id="timer" v-bind:style="{backgroundColor: color}">
    <div class="actions">
        <button class="button" @click="reset">Reset</button>
        <button class="button" @click="start">Start</button>
        <button class="button" @click="pause">Pause</button>
    </div>
    <div class="time">
        {{time}}
    </div>
</div>

</body>

<script>

    var vm = new Vue({
        el: '#timer',
        data: {
            time: 'Hack away!',
            timerSeconds: 10 * 60
        },
        created: function () {
            this.reset();
            this.start();
        },
        methods: {
            start: function () {
                this.lastTick = moment();
                if (!this.interval)
                    this.interval = setInterval(this.countdown, 100);
            },
            reset: function () {
                this.millisecondsLeft = this.timerSeconds * 1000;
            },
            pause: function () {
                clearInterval(this.interval);
                this.interval = null;
            },
            countdown: function () {
                var now = moment();
                var change = now.diff(this.lastTick);
                this.millisecondsLeft = this.millisecondsLeft - change;
                if (this.millisecondsLeft <= 0) {
                    this.time = 'Time is up!';
                    this.color = '#ff0000';
                } else {
                    this.time = moment.utc(this.millisecondsLeft).format("mm:ss");
                    this.color = '#66aa66';
                }
                this.lastTick = moment();
            }

        },
        beforeDestroy: function () {
            this.pause();
        }
    });


</script>


</html>
